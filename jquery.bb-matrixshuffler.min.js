/*!
 * BB Matrix Shuffle 0.8.5 beta
 * Reshuffle a grid array into various other layouts
 * https://github.com/bobbybol/matrixshuffler
 * @license MIT licensed
 *
 * Copyright (C) 2016 bobbybol.com - A project by Bobby Bol
 */
!function(e){"use strict";e.fn.bbShuffleMatrix=function(r){function s(e){return[Math.random(),e]}function h(e){return e[e.length-1]}function a(e){return[].concat.apply([],e)}function n(e){return e.map(s).sort().map(h)}function l(e){var s,h,r=o.columns,t=o.rows,i=t+r-1,f=[];for(s=0;i>s;s++)for(h=Math.max(0,s-r+1);h<=Math.min(t,s+1)-1;h++){var a=h*r+s-h;f.push(e[a])}return f}function u(e){var r=e.length/o.rows,t=e.reduce(function(e,t,i){return(i%r===0?e.push([t]):e[e.length-1].push(t))&&e},[]).map(function(e){return e.reverse()});return a(t)}function c(e){var f,s,r=o.rows,t=o.columns,i=[];for(f=0;t>f;f++){var h=[];for(s=0;r>s;s++)h.push(e[s*t+f]);i.push(h)}return a(i)}function v(e){var n,l,u,p,m,g,b,r=o.rows,t=o.columns,i=t,f=r,s=i>=f?t:r,h=i>=f?r:t,c=[],v=[];for(n=s%2?(s+1)/2:s/2,l=h%2?(h+1)/2:h/2,p=0;r>p;p++)u=e.slice(i*p,i*p+i),c.push(u);for(m=0;n>m;m++){var D,A,y,M,d=[],w=[],x=c.length,I=c[0].length;if(x>=I+1)D=c.shift(),A=c.pop(),d.push(D,A),v.push(a(d));else if(I>x+1){for(g=0;g<c.length;g++)y=c[g].shift(),M=c[g].pop(),w.push(y,M);v.push(a(w))}else{if(1===c.length)d.push(c[0]),m++;else if(2===c.length)d.push(c[0],c[1]),m++;else{for(D=c.shift(),A=c.pop(),b=0;b<c.length;b++)y=c[b].shift(),M=c[b].pop(),w.push(y,M);d.push(D,w,A)}v.push(a(d))}}return v}var t,i=[];this.data("bbMatrixInfo")?(r.rows=this.data("bbMatrixInfo").rows,r.columns=this.data("bbMatrixInfo").columns,t=this.children().toArray()):t=this.toArray();var o={rows:10,columns:10,shuffleAlgorithm:"linear",shuffleDirection:"top->bottom"};e.extend(o,r);return"linear"===o.shuffleAlgorithm&&("top->bottom"===o.shuffleDirection?i=t:"bottom->top"===o.shuffleDirection?i=t.reverse():"left->right"===o.shuffleDirection?i=c(t):"right->left"===o.shuffleDirection?i=c(t).reverse():console.warn("You chose a shuffleDirection that isn't compatible with the shuffleAlgorithm you specified. Please match direction with algorithm.")),"random"===o.shuffleAlgorithm&&(i=n(t)),"diagonal"===o.shuffleAlgorithm&&("topleft->bottomright"===o.shuffleDirection?i=l(t):"bottomright->topleft"===o.shuffleDirection?i=l(t).reverse():"topright->bottomleft"===o.shuffleDirection?i=l(u(t)):"bottomleft->topright"===o.shuffleDirection?i=l(u(t)).reverse():console.warn("You chose a shuffleDirection that isn't compatible with the shuffleAlgorithm you specified. Please match direction with algorithm.")),"circular"===o.shuffleAlgorithm&&("outside->in"===o.shuffleDirection?i=v(t):"inside->out"===o.shuffleDirection?i=v(t).reverse():console.warn("You chose a shuffleDirection that isn't compatible with the shuffleAlgorithm you specified. Please match direction with algorithm.")),e(i)}}(jQuery);